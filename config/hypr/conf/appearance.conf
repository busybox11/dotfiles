#####################
### LOOK AND FEEL ###
#####################

# https://wiki.hyprland.org/Configuring/Variables/#general
general {
    gaps_in = 4
    gaps_out = 8

    border_size = 1

    # https://wiki.hyprland.org/Configuring/Variables/#variable-types for info about colors
    # col.active_border = rgba(cc00ff88) rgba(8fd9fb88) 33deg
    # col.inactive_border = rgba(912ea950)
    # col.active_border = rgba(ffffff90)
    # col.inactive_border = rgba(ffffff10)
    # col.active_border = $primary
    # col.inactive_border = $outline

    # Set to true enable resizing windows by clicking and dragging on borders and gaps
    resize_on_border = true

    # Please see https://wiki.hyprland.org/Configuring/Tearing/ before you turn this on
    allow_tearing = false

    layout = dwindle
}

# https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    rounding = 12

    # Change transparency of focused and unfocused windows
    active_opacity = 1.0
    inactive_opacity = 1.0

    shadow {
        enabled = false
        range = 4
        render_power = 3
        color = rgba(1a1a1aee)
    }

    # https://wiki.hyprland.org/Configuring/Variables/#blur
    blur {
        enabled = true
        size = 4
        passes = 3

        xray = false

        vibrancy = 0.25
        noise = 0.25
    }
}

layerrule {
  name = layerrule-1
  blur = on
  match:namespace = class:(bubbles.scr)
}

layerrule {
  name = bars
  blur = on
  ignore_alpha = 0
  match:namespace = ^(waybar|eww)$
}

layerrule {
  name = control-center
  blur = on
  dim_around = on
  ignore_alpha = 0
  match:namespace = swaync-control-center
}

layerrule {
  name = notifications
  blur = on
  animation = slide
  ignore_alpha = 0
  match:namespace = swaync-notification-window
}

layerrule {
  name = osd
  blur = on
  ignore_alpha = 0.3
  above_lock = on
  match:namespace = swayosd
}


# Remove black bar on screenshots
layerrule {
  name = layerrule-noanim
  no_anim = on
  match:namespace = ^(hyprpicker|selection)$
}

layerrule {
  name = hyprpaper
  animation = popin 80%

  match:namespace = ^hyprpaper$
}


# Picture-in-a-Picture (PIP) rules: Oddly, some need re-duplication. This is because the window for
# PIP changes after on first launch, and will not inherit the rules...
# windowrulev2 = opacity 0.95 0.75, title:^(Picture-in-Picture)$ # for opacity: [focus num] [bg num]
# Interestingly, the opacity rule above doesn't need the reduplication?
windowrule {
  name = pip
  pin = on
  float = on
  size = (monitor_w*0.25) (monitor_h*0.25)
  move = ((monitor_w*0.72)) ((monitor_h*0.07))
  match:title = ^(Picture-in-Picture|Picture in picture)$
}


windowrule {
  name = xwayland
  opacity = 0.0 override 0.0 override
  no_anim = on
  no_initial_focus = on
  max_size = 1 1
  no_blur = on
  match:class = ^(xwaylandvideobridge)$
}


# gnome nautilus xdp window
windowrule {
  name = xdgfilepicker
  tag = +xdgfilepicker
  match:title = ^(Open File(s)?|Open Folder(s)?|File Upload(.*)|Select Folder to Upload(.*))$
}


windowrule {
  name = windowrule-8
  center = on
  float = on
  dim_around = on
  size = (monitor_w*0.45) (monitor_h*0.6)
  match:tag = xdgfilepicker
}


# tags
windowrule {
  name = windowrule-9
  border_color = $error $error
  match:tag = bell
}

windowrule {
  name = windowrule-10
  border_color = $error_container $error_container
  match:tag = urgent
}

# https://wiki.hyprland.org/Configuring/Variables/#animations
animations {
    enabled = true
    bezier = linear, 0, 0, 1, 1
    bezier = md3_standard, 0.2, 0, 0, 1
    bezier = md3_decel, 0.05, 0.7, 0.1, 1
    bezier = md3_accel, 0.3, 0, 0.8, 0.15
    bezier = overshot, 0.05, 0.9, 0.1, 1.1
    bezier = orazyshot, 0.1, 1.5, 0.76, 0.92
    bezier = hyprnostretch, 0.05, 0.9, 0.1, 1.0
    bezier = fluent_decel, 0.1, 1, 0, 1
    bezier = easeInOutCirc, 0.85, 0, 0.15, 1
    bezier = easeOutCirc, 0, 0.55, 0.45, 1
    bezier = easeOutExpo, 0.16, 1, 0.3, 1
    animation = windows, 1, 3, md3_decel, popin 60%
    animation = border, 1, 10, default
    animation = fade, 1, 2.5, md3_decel
    animation = workspaces, 1, 3.5, easeOutExpo, slidefade 25%
    animation = specialWorkspace, 1, 3, md3_decel, slidevert
    animation = layersIn, 1, 4, md3_decel, slidefade 10%
    animation = layersOut, 1, 6, md3_accel, slidefade
}

